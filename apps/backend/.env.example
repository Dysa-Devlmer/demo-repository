# ================================
# ChatBotDysa Backend - Environment Variables
# ================================
#
# IMPORTANTE: Este archivo es un ejemplo.
# Copiar a .env para desarrollo local:
#   cp .env.example .env
#
# Luego editar .env con tus credenciales reales.
# NUNCA commitear archivos .env al repositorio (están en .gitignore)
# ================================

# ================================
# DATABASE (PostgreSQL)
# ================================
# Desarrollo con Docker:
DATABASE_HOST=localhost
DATABASE_PORT=15432
DATABASE_USER=postgres
DATABASE_PASSWORD=supersecret
DATABASE_NAME=chatbotdysa
DATABASE_URL=postgresql://postgres:supersecret@localhost:15432/chatbotdysa

# Producción (AWS RDS o similar):
# DATABASE_HOST=chatbotdysa-prod.xxxxxx.us-east-1.rds.amazonaws.com
# DATABASE_PORT=5432
# DATABASE_USER=chatbotdysa_admin
# DATABASE_PASSWORD=CAMBIAR_EN_PRODUCCION
# DATABASE_NAME=chatbotdysa_production

# ================================
# REDIS (Cache y Sesiones)
# ================================
# Desarrollo con Docker:
REDIS_HOST=localhost
REDIS_PORT=16379
REDIS_PASSWORD=

# Producción (AWS ElastiCache):
# REDIS_HOST=chatbotdysa-prod.xxxxxx.0001.use1.cache.amazonaws.com
# REDIS_PORT=6379
# REDIS_PASSWORD=your-redis-password

# ================================
# JWT AUTHENTICATION
# ================================
JWT_SECRET=CAMBIAR_ESTE_SECRET_POR_UNO_SEGURO_DE_64_CARACTERES
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# Generar JWT_SECRET seguro:
# openssl rand -base64 64

# ================================
# OLLAMA AI (Chatbot)
# ================================
# CRÍTICO: Necesario para el chatbot de WhatsApp
OLLAMA_URL=http://127.0.0.1:11434
OLLAMA_MODEL=llama3.2:3b
OLLAMA_TIMEOUT=90000
OLLAMA_NUM_PREDICT=400

# Para instalar Ollama en Mac:
# brew install ollama
# ollama pull llama3:8b
# ollama serve

# ================================
# WHATSAPP BUSINESS API
# ================================
# Obtener en: https://developers.facebook.com/apps/
WA_ACCESS_TOKEN=EAAQI3Q1fH2QBQLTdTVCB5OZCWGpSCLTaZCov0GcFIB4MZAxyOUWyp8pNYvrnuw0zrhHh43a2rsT6axvFTL0TNifMAptZBQkjuIdtLLYLdLxJrrvWoRw6B158t1z0Q6gLkQOT1oFVuloZBMEI8CMDJhhwBmmJ4Hz9JuOWSCLnA3X3EjVPQOIlUrrPTSOM4yQo2NwZDZD
WA_BUSINESS_PHONE_ID=905984725929536
WA_WEBHOOK_VERIFY_TOKEN=chatbotdysa_webhook_verify_2024
WA_API_VERSION=v18.0

# Para desarrollo local, necesitas exponer el webhook con ngrok:
# ngrok http 8005
# Luego configurar la URL en Facebook Developer Console

# ================================
# APPLICATION URLs
# ================================
# Desarrollo (Docker):
PORT=8005
NODE_ENV=development
APP_URL=http://localhost:6001
ADMIN_URL=http://localhost:7001
API_URL=http://localhost:8005

# Producción:
# PORT=8005
# NODE_ENV=production
# APP_URL=https://chatbotdysa.com
# ADMIN_URL=https://admin.chatbotdysa.com
# API_URL=https://api.chatbotdysa.com

# ================================
# CORS
# ================================
CORS_ORIGINS=http://localhost:6001,http://localhost:7001,http://localhost:3000

# Producción:
# CORS_ORIGINS=https://chatbotdysa.com,https://admin.chatbotdysa.com

# ================================
# MERCADO PAGO (Pagos)
# ================================
# Obtener en: https://www.mercadopago.cl/developers/panel/credentials
MERCADOPAGO_PUBLIC_KEY=APP_USR-xxxxxxxx-xxxxxx-xxxxxx-xxxxxx-xxxxxxxxxxxx
MERCADOPAGO_ACCESS_TOKEN=APP_USR-xxxxxxxxxxxx-xxxxxx-xxxxxxxxxxxx-xxxxxxxxxxxx-xxxxxxxxxxxx
MERCADOPAGO_WEBHOOK_SECRET=your-webhook-secret

# Test credentials (para desarrollo):
# MERCADOPAGO_PUBLIC_KEY=TEST-xxxxxxxx-xxxxxx-xxxxxx-xxxxxx-xxxxxxxxxxxx
# MERCADOPAGO_ACCESS_TOKEN=TEST-xxxxxxxxxxxx-xxxxxx-xxxxxxxxxxxx-xxxxxxxxxxxx-xxxxxxxxxxxx

# ================================
# SENDGRID (Email)
# ================================
# Obtener en: https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=SG.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
SENDGRID_FROM_EMAIL=noreply@chatbotdysa.com
SENDGRID_FROM_NAME=ChatBotDysa

# Templates IDs (crear en SendGrid):
SENDGRID_TEMPLATE_WELCOME=d-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
SENDGRID_TEMPLATE_PAYMENT_CONFIRMATION=d-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ================================
# TWILIO (SMS/Voice - Opcional)
# ================================
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_PHONE_NUMBER=+1234567890

# ================================
# AWS S3 (Almacenamiento de archivos - Opcional)
# ================================
AWS_ACCESS_KEY_ID=AKIA...
AWS_SECRET_ACCESS_KEY=...
AWS_S3_BUCKET=chatbotdysa-production
AWS_REGION=us-east-1

# ================================
# RATE LIMITING
# ================================
THROTTLE_TTL=60
THROTTLE_LIMIT=100

# Producción (más restrictivo):
# THROTTLE_TTL=60
# THROTTLE_LIMIT=50

# ================================
# LOGGING
# ================================
LOG_LEVEL=debug
# LOG_LEVEL=info (para producción)

# ================================
# ENCRYPTION
# ================================
ENCRYPTION_KEY=CAMBIAR_ESTE_KEY_DE_32_CARACTERES

# Generar:
# openssl rand -hex 32

# ================================
# SENTRY (Error Tracking - Opcional)
# ================================
SENTRY_DSN=https://xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx@o1234567.ingest.sentry.io/1234567
SENTRY_ENVIRONMENT=development
# SENTRY_ENVIRONMENT=production

# ================================
# FEATURE FLAGS
# ================================
ENABLE_SWAGGER=true
ENABLE_RATE_LIMITING=false
ENABLE_CACHE=true
ENABLE_QUEUE=false

# Producción:
# ENABLE_SWAGGER=false
# ENABLE_RATE_LIMITING=true
# ENABLE_QUEUE=true

# ================================
# BACKUP
# ================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30

# ================================
# TIMEZONE
# ================================
TZ=America/Santiago

# ================================
# RESTAURANT INFO (Para chatbot)
# ================================
RESTAURANT_NAME=ChatBotDysa
RESTAURANT_PHONE=+56965419765
RESTAURANT_ADDRESS=Sistema ChatBotDysa
RESTAURANT_HOURS=24/7
