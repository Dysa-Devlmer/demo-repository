# ================================
# ChatBotDysa Backend - Environment Variables
# ================================
#
# IMPORTANTE: Este archivo es un ejemplo.
# Copiar a .env.local para desarrollo
# Copiar a .env.production para producción
#
# NUNCA commitear archivos .env al repositorio
# ================================

# ================================
# DATABASE
# ================================
DATABASE_URL=postgresql://postgres:supersecret@localhost:15432/chatbotdysa
DATABASE_HOST=localhost
DATABASE_PORT=15432
DATABASE_USER=postgres
DATABASE_PASSWORD=supersecret
DATABASE_NAME=chatbotdysa

# Producción (AWS RDS):
# DATABASE_HOST=chatbotdysa-prod.xxxxxx.us-east-1.rds.amazonaws.com
# DATABASE_USER=chatbotdysa_admin
# DATABASE_NAME=chatbotdysa_production

# ================================
# JWT AUTHENTICATION
# ================================
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# Generar JWT_SECRET en producción:
# node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"

# ================================
# MERCADO PAGO
# ================================
# Obtener en: https://www.mercadopago.cl/developers/panel/credentials
MERCADOPAGO_PUBLIC_KEY=APP_USR-xxxxxxxx-xxxxxx-xxxxxx-xxxxxx-xxxxxxxxxxxx
MERCADOPAGO_ACCESS_TOKEN=APP_USR-xxxxxxxxxxxx-xxxxxx-xxxxxxxxxxxx-xxxxxxxxxxxx-xxxxxxxxxxxx
MERCADOPAGO_WEBHOOK_SECRET=your-webhook-secret

# Test credentials (para desarrollo):
# MERCADOPAGO_PUBLIC_KEY=TEST-xxxxxxxx-xxxxxx-xxxxxx-xxxxxx-xxxxxxxxxxxx
# MERCADOPAGO_ACCESS_TOKEN=TEST-xxxxxxxxxxxx-xxxxxx-xxxxxxxxxxxx-xxxxxxxxxxxx-xxxxxxxxxxxx

# ================================
# SENDGRID (Email)
# ================================
# Obtener en: https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=SG.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
SENDGRID_FROM_EMAIL=noreply@chatbotdysa.com
SENDGRID_FROM_NAME=ChatBotDysa

# Templates IDs (crear en SendGrid):
SENDGRID_TEMPLATE_WELCOME=d-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
SENDGRID_TEMPLATE_PAYMENT_CONFIRMATION=d-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
SENDGRID_TEMPLATE_ACCOUNT_ACTIVATION=d-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
SENDGRID_TEMPLATE_TRIAL_ENDING=d-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
SENDGRID_TEMPLATE_INVOICE=d-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ================================
# APPLICATION URLs
# ================================
# Desarrollo:
APP_URL=http://localhost:6001
ADMIN_URL=http://localhost:7001
API_URL=http://localhost:8005

# Producción:
# APP_URL=https://chatbotdysa.com
# ADMIN_URL=https://admin.chatbotdysa.com
# API_URL=https://api.chatbotdysa.com

# ================================
# CORS
# ================================
CORS_ORIGINS=http://localhost:6001,http://localhost:7001

# Producción:
# CORS_ORIGINS=https://chatbotdysa.com,https://admin.chatbotdysa.com

# ================================
# REDIS (Queue y Cache)
# ================================
REDIS_HOST=localhost
REDIS_PORT=16379
REDIS_PASSWORD=

# Producción (AWS ElastiCache):
# REDIS_HOST=chatbotdysa-prod.xxxxxx.0001.use1.cache.amazonaws.com
# REDIS_PORT=6379
# REDIS_PASSWORD=your-redis-password

# ================================
# AWS S3 (Almacenamiento de archivos)
# ================================
# Obtener en: https://console.aws.amazon.com/iam/
AWS_ACCESS_KEY_ID=AKIA...
AWS_SECRET_ACCESS_KEY=...
AWS_S3_BUCKET=chatbotdysa-production
AWS_REGION=us-east-1

# ================================
# SENTRY (Error Tracking)
# ================================
# Obtener en: https://sentry.io/settings/projects/
SENTRY_DSN=https://xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx@o1234567.ingest.sentry.io/1234567
SENTRY_ENVIRONMENT=development
# SENTRY_ENVIRONMENT=production

# ================================
# WHATSAPP BUSINESS API
# ================================
WHATSAPP_API_URL=https://graph.facebook.com/v17.0
WHATSAPP_PHONE_NUMBER_ID=your-phone-number-id
WHATSAPP_ACCESS_TOKEN=your-whatsapp-access-token
WHATSAPP_VERIFY_TOKEN=your-verify-token

# ================================
# OPENAI (para chatbot IA)
# ================================
# Obtener en: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-proj-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_MAX_TOKENS=2000

# ================================
# RATE LIMITING
# ================================
THROTTLE_TTL=60
THROTTLE_LIMIT=100

# Producción (más restrictivo):
# THROTTLE_TTL=60
# THROTTLE_LIMIT=50

# ================================
# LOGGING
# ================================
LOG_LEVEL=debug
# LOG_LEVEL=info (para producción)

# ================================
# ENCRYPTION
# ================================
ENCRYPTION_KEY=your-encryption-key-32-characters-long

# Generar:
# node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"

# ================================
# MONITORING
# ================================
# New Relic (opcional)
NEW_RELIC_LICENSE_KEY=
NEW_RELIC_APP_NAME=ChatBotDysa-Backend

# ================================
# FEATURE FLAGS
# ================================
ENABLE_SWAGGER=true
ENABLE_RATE_LIMITING=false
ENABLE_CACHE=true
ENABLE_QUEUE=false

# Producción:
# ENABLE_SWAGGER=false
# ENABLE_RATE_LIMITING=true
# ENABLE_QUEUE=true

# ================================
# BACKUP
# ================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30

# ================================
# TIMEZONE
# ================================
TZ=America/Santiago

# ================================
# NODE ENVIRONMENT
# ================================
NODE_ENV=development
# NODE_ENV=production
PORT=8005
