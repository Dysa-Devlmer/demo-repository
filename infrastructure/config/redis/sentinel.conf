# =============================================================================
# ðŸš€ CHATBOTDYSA ENTERPRISE+++++ REDIS SENTINEL CONFIGURATION
# High Availability Monitoring for Redis Cluster
# =============================================================================

# Basic Configuration
port 26379
bind 0.0.0.0

# Sentinel announce ip and port
# sentinel announce-ip <ip>
# sentinel announce-port <port>

# Working Directory
dir /tmp

# Master Monitoring Configuration
# Format: sentinel monitor <master-name> <ip> <redis-port> <quorum>
sentinel monitor chatbotdysa-master redis-node-1 7001 2
sentinel monitor chatbotdysa-master-2 redis-node-2 7002 2
sentinel monitor chatbotdysa-master-3 redis-node-3 7003 2

# Master Authentication
# sentinel auth-pass <master-name> <password>
# This will be set via environment variable

# Down-after-milliseconds
# Number of milliseconds the master (or any attached replica or sentinel) should
# be unreachable in order to consider it in S_DOWN state
sentinel down-after-milliseconds chatbotdysa-master 30000
sentinel down-after-milliseconds chatbotdysa-master-2 30000
sentinel down-after-milliseconds chatbotdysa-master-3 30000

# Parallel-syncs
# How many replicas we can reconfigure to point to the new replica simultaneously
# during the failover. Use a low number if you use the replicas to serve read queries
sentinel parallel-syncs chatbotdysa-master 1
sentinel parallel-syncs chatbotdysa-master-2 1
sentinel parallel-syncs chatbotdysa-master-3 1

# Failover Timeout
# Failover timeout in milliseconds
sentinel failover-timeout chatbotdysa-master 180000
sentinel failover-timeout chatbotdysa-master-2 180000
sentinel failover-timeout chatbotdysa-master-3 180000

# Notification Scripts
# You can configure Sentinel to call scripts when certain events happen
# sentinel notification-script <master-name> <script-path>
# sentinel client-reconfig-script <master-name> <script-path>

# Security
# requirepass <password>
# This will be set via environment variable

# Deny dangerous commands
sentinel deny-scripts-reconfig yes

# Logging
logfile /var/log/sentinel.log
loglevel notice

# Enterprise Configuration
# Enable protected mode (requires authentication)
protected-mode no

# TCP settings for enterprise networks
tcp-keepalive 60

# Resolve hostnames
sentinel resolve-hostnames yes
sentinel announce-hostnames yes

# Enterprise monitoring intervals
sentinel publish-period 2000
sentinel ask-period 1000

# Leader election timeout
sentinel leader-epoch-timeout 30000

# Configuration propagation
sentinel config-epoch chatbotdysa-master 0
sentinel config-epoch chatbotdysa-master-2 0
sentinel config-epoch chatbotdysa-master-3 0

# Enterprise High Availability Settings
sentinel known-replica chatbotdysa-master redis-node-4 7004
sentinel known-replica chatbotdysa-master-2 redis-node-5 7005
sentinel known-replica chatbotdysa-master-3 redis-node-6 7006

# Client timeout
sentinel client-output-buffer-limit normal 0 0 0
sentinel client-output-buffer-limit replica 256mb 64mb 60
sentinel client-output-buffer-limit pubsub 32mb 8mb 60

# Enterprise notification and monitoring
# Uncomment and configure for production use
# sentinel notification-script chatbotdysa-master /opt/chatbotdysa/scripts/sentinel-notify.sh
# sentinel client-reconfig-script chatbotdysa-master /opt/chatbotdysa/scripts/sentinel-reconfig.sh