# ============================================
# ChatBotDysa - Plantilla de Variables de Entorno
# ============================================
# Copia este archivo como .env y configura tus valores
# 锔 NO subir .env a Git - Solo este .env.example
# ============================================

# ============================================
# ENTORNO
# ============================================
NODE_ENV=development  # development | production

# ============================================
# BASE DE DATOS POSTGRESQL
# ============================================
DATABASE_HOST=localhost
DATABASE_PORT=15432
DATABASE_USER=postgres
DATABASE_PASSWORD=supersecret  # 锔 Cambiar en producci贸n (usar generate-secrets.sh)
DATABASE_NAME=chatbotdysa

# ============================================
# REDIS CACHE
# ============================================
REDIS_HOST=localhost
REDIS_PORT=16379
REDIS_PASSWORD=  # Opcional en desarrollo, REQUERIDO en producci贸n

# ============================================
# OLLAMA AI SERVICE
# ============================================
OLLAMA_URL=http://localhost:21434
OLLAMA_MODEL=phi3:mini  # phi3:mini | llama3:8b | mistral:7b | gemma:7b

# ============================================
# BACKEND API
# ============================================
PORT=8005
API_URL=http://localhost:8005

# ============================================
# JWT AUTHENTICATION
# ============================================
JWT_SECRET=change_me_in_production_very_secure_key  # 锔 CAMBIAR EN PRODUCCIN
JWT_EXPIRATION=1h
JWT_REFRESH_EXPIRATION=7d

# ============================================
# CSRF PROTECTION
# ============================================
CSRF_SECRET=change_me_in_production_csrf_secret  # 锔 CAMBIAR EN PRODUCCIN

# ============================================
# NEXTAUTH (ADMIN PANEL)
# ============================================
NEXTAUTH_SECRET=change_me_in_production_nextauth_secret  # 锔 CAMBIAR EN PRODUCCIN
NEXTAUTH_URL=http://localhost:7001

# ============================================
# FRONTEND URLS
# ============================================
FRONTEND_URL=http://localhost:3000
ADMIN_URL=http://localhost:7001
LANDING_URL=http://localhost:3004

# ============================================
# CORS CONFIGURATION
# ============================================
CORS_ORIGIN=http://localhost:3000,http://localhost:7001,http://localhost:3004

# ============================================
# RATE LIMITING
# ============================================
RATE_LIMIT_TTL=60  # Tiempo en segundos
RATE_LIMIT_LIMIT=100  # Requests por TTL (desarrollo: 100, producci贸n: 20)

# ============================================
# SECURITY
# ============================================
API_KEY_INTERNAL=  # Generado con script generate-secrets.sh

# ============================================
# LOGGING
# ============================================
LOG_LEVEL=debug  # debug | info | warn | error

# ============================================
# SENDGRID (EMAIL SERVICE)
# ============================================
SENDGRID_API_KEY=SG.xxxxxxxxxxxxxxxx
SENDGRID_FROM_EMAIL=noreply@tudominio.com

# ============================================
# MERCADOPAGO (CHILEAN PAYMENT GATEWAY)
# ============================================
MERCADOPAGO_ACCESS_TOKEN=APP_USR-xxxxxxxxxxxxxxxx  # Token de acceso (prueba o producci贸n)
MERCADOPAGO_PUBLIC_KEY=APP_USR-xxxxxxxxxxxxxxxx    # Clave p煤blica
MERCADOPAGO_WEBHOOK_SECRET=  # Secret para validar webhooks (configurar en panel MP)

# URLs de la aplicaci贸n (para callbacks de pago)
APP_URL=http://localhost:3000  # Frontend principal

# ============================================
# TWILIO (WHATSAPP BUSINESS API)
# ============================================
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=

# ============================================
# WHATSAPP (ALTERNATE INTEGRATION)
# ============================================
WHATSAPP_PHONE_NUMBER_ID=
WHATSAPP_ACCESS_TOKEN=

# ============================================
# INFORMACIN DEL RESTAURANTE
# ============================================
RESTAURANT_NAME=Mi Restaurante
RESTAURANT_TIMEZONE=America/Santiago
RESTAURANT_CURRENCY=CLP
RESTAURANT_LOCALE=es-CL
CONTACT_EMAIL=contacto@tudominio.com

# ============================================
# CONFIGURACIN AVANZADA (OPCIONAL)
# ============================================

# Session Configuration
SESSION_LIFETIME=86400  # 24 horas en segundos
SESSION_REFRESH_THRESHOLD=3600  # 1 hora en segundos

# File Upload Limits
MAX_FILE_SIZE=10485760  # 10MB en bytes
ALLOWED_FILE_TYPES=image/*,application/pdf,.doc,.docx

# Widget Configuration
WIDGET_DEFAULT_THEME=purple
WIDGET_DEFAULT_POSITION=bottom-right
WIDGET_DEFAULT_LANGUAGE=es

# ============================================
# DOCKER PORTS (DEVELOPMENT)
# ============================================
DOCKER_DATABASE_PORT=15432
DOCKER_REDIS_PORT=16379
DOCKER_OLLAMA_PORT=21434
DOCKER_BACKEND_PORT=8005
DOCKER_ADMIN_PORT=7001
DOCKER_LANDING_PORT=3004

# ============================================
# NOTAS IMPORTANTES
# ============================================
#
#  PARA DESARROLLO:
# 1. Copia este archivo: cp .env.example .env
# 2. Los valores por defecto funcionan para desarrollo local
# 3. Solo necesitas Docker instalado y ejecutar: docker-compose up -d
#
#  PARA PRODUCCIN:
# 1. Ejecuta: ./scripts/generate-secrets.sh <nombre_restaurante>
# 2. Esto genera secrets seguros autom谩ticamente
# 3. Configura servicios externos (SendGrid, MercadoPago, Twilio)
# 4. Actualiza URLs con dominios reales
# 5. Usa HTTPS (no HTTP)
# 6. Configura CORS_ORIGIN con dominios permitidos
#
# 锔 SEGURIDAD:
# - NUNCA subir .env a Git
# - Los secrets marcados con 锔 DEBEN cambiarse en producci贸n
# - Usa contrase帽as fuertes generadas aleatoriamente
# - Rota secrets cada 90 d铆as
#
# ============================================
